(self.webpackChunk_vanblog_admin=self.webpackChunk_vanblog_admin||[]).push([[8185],{82592:function(X){X.exports={"card-full-title":"card-full-title___rJTGA",thinheader:"thinheader___2DwVu"}},86601:function(X,M,a){"use strict";a.d(M,{Z:function(){return B}});var v=a(22385),A=a(45777),L=a(1870),z=a(85893);function B(W){return(0,z.jsxs)("span",{children:[(0,z.jsx)("span",{style:{marginRight:4},children:W.title}),(0,z.jsx)(A.Z,{title:W.tip,placement:"bottom",children:(0,z.jsx)(L.Z,{style:{fontSize:16,fontWeight:400}})})]})}},94098:function(X,M,a){"use strict";a.r(M),a.d(M,{default:function(){return Ae}});var v=a(2824),A=a(50236),L=a(67265),z=a(82592),B=a.n(z),W=a(20228),N=a(11382),S=a(11849),g=a(90636),O=a(3182),h=a(38345),i=a(48773),s=a(67294),I=a(71704),ae=a(43358),ue=a(34041),e=a(85893),ie=[3,5,7,10,15,30],le=function(n,l){var t=[];return n.forEach(function(o){t.push({label:"\u8FD1".concat(o).concat(l),value:o})}),t};function E(m){return(0,e.jsx)(ue.Z,{size:"small",value:m.value,onChange:function(l){m.setValue(l)},options:le(ie,m.d)})}var _=a(63430),ee=a(78677),k=a(15721),Y=a(48717),re=function(){var n=(0,s.useState)(),l=(0,v.Z)(n,2),t=l[0],o=l[1],f=(0,s.useState)(!0),x=(0,v.Z)(f,2),F=x[0],y=x[1],V=(0,s.useState)(!1),P=(0,v.Z)(V,2),u=P[0],Q=P[1],r=(0,k.u)(5),R=(0,v.Z)(r,2),D=R[0],K=R[1],U=(0,s.useCallback)((0,O.Z)((0,g.Z)().mark(function p(){var c,w;return(0,g.Z)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,(0,I.xq)("article",5,5,D);case 2:c=j.sent,w=c.data,o(w);case 5:case"end":return j.stop()}},p)})),[o,D]);(0,s.useEffect)(function(){y(!0),U().then(function(){y(!1)})},[U,y]);var H={data:(t==null?void 0:t.categoryPieData)||[],angleField:"value",colorField:"type",radius:.75,label:{type:"spider",labelHeight:28,content:`{name}
{percentage}`},interactions:[{type:"element-selected"},{type:"element-active"}]},q={data:(t==null?void 0:t.columnData)||[],xField:"type",yField:"value",label:{position:"middle"},color:function(){return"#1772B4"},xAxis:{label:{autoHide:!0,autoRotate:!1}},meta:{type:{alias:"\u6807\u7B7E\u540D"},value:{alias:"\u6587\u7AE0\u6570\u91CF"}}};return(0,e.jsx)(Y.Z,{onResize:function(c){Q(c.width<596)},children:(0,e.jsxs)(N.Z,{spinning:F,children:[(0,e.jsxs)(h.Z,{bordered:!0,split:u?"horizontal":"vertical",style:{marginBottom:u?8:0},children:[(0,e.jsx)(i.Z,{colSpan:u?24:6,statistic:{title:"\u6587\u7AE0\u6570",value:(t==null?void 0:t.articleNum)||0,layout:u?"horizontal":"vertical"}}),(0,e.jsx)(i.Z,{colSpan:u?24:6,statistic:{title:"\u603B\u5B57\u6570",value:(t==null?void 0:t.wordNum)||0,layout:u?"horizontal":"vertical"}}),(0,e.jsx)(i.Z,{colSpan:u?24:6,statistic:{title:"\u5206\u7C7B\u6570",value:(t==null?void 0:t.categoryNum)||0,layout:u?"horizontal":"vertical"}}),(0,e.jsx)(i.Z,{colSpan:u?24:6,statistic:{title:"\u6807\u7B7E\u6570",value:(t==null?void 0:t.tagNum)||0,layout:u?"horizontal":"vertical"}})]}),(0,e.jsx)(h.Z,{split:u?"horizontal":"vertical",bordered:!0,style:{marginBottom:u?8:0},children:(0,e.jsx)(i.Z,{colSpan:24,className:B()["card-full-title"],title:(0,e.jsx)("div",{style:{display:"flex",justifyContent:"space-between"},children:(0,e.jsx)("div",{children:"\u5206\u7C7B\u997C\u56FE"})}),chart:(0,e.jsx)("div",{style:{marginTop:-30},children:(0,e.jsx)(_.Z,(0,S.Z)({},H))})})}),(0,e.jsx)(h.Z,{split:u?"horizontal":"vertical",bordered:!0,style:{marginBottom:u?8:0},children:(0,e.jsx)(i.Z,{colSpan:24,className:B()["card-full-title"],title:(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,e.jsx)("div",{children:"\u6807\u7B7E\u6587\u7AE0\u6570 TOP \u67F1\u72B6\u56FE"}),(0,e.jsx)(E,{d:"\u6761",value:D,setValue:K})]}),chart:(0,e.jsx)("div",{style:{marginTop:-10},children:(0,e.jsx)(ee.Z,(0,S.Z)({},q))})})})]})},"resize-observer")},se=re,de=a(91220),J=a(86601),te=a(64183),ve=i.Z.Statistic,Fe=function(){var n,l,t,o,f,x,F,y,V,P,u=(0,s.useState)(),Q=(0,v.Z)(u,2),r=Q[0],R=Q[1],D=(0,s.useState)(!0),K=(0,v.Z)(D,2),U=K[0],H=K[1],q=(0,k.u)(5),p=(0,v.Z)(q,2),c=p[0],w=p[1],ne=(0,s.useState)(!1),j=(0,v.Z)(ne,2),d=j[0],Se=j[1],xe=(0,s.useCallback)((0,O.Z)((0,g.Z)().mark(function T(){var Z,$;return(0,g.Z)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,(0,I.xq)("overview",c);case 2:Z=C.sent,$=Z.data,R($);case 5:case"end":return C.stop()}},T)})),[R,c]);(0,s.useEffect)(function(){H(!0),xe().then(function(){H(!1)})},[xe,H]);var De=(0,s.useMemo)(function(){var T,Z,$=[],b=(0,de.Z)((r==null||(T=r.viewer)===null||T===void 0||(Z=T.grid)===null||Z===void 0?void 0:Z.each)||[]),C;try{for(b.s();!(C=b.n()).done;){var G=C.value;$.push({date:G.date,\u8BBF\u5BA2\u6570:G.visited,\u8BBF\u95EE\u91CF:G.viewer})}}catch(oe){b.e(oe)}finally{b.f()}return $},[r]),we=(0,s.useMemo)(function(){var T,Z,$=[],b=(0,de.Z)((r==null||(T=r.viewer)===null||T===void 0||(Z=T.grid)===null||Z===void 0?void 0:Z.total)||[]),C;try{for(b.s();!(C=b.n()).done;){var G=C.value;$.push({date:G.date,\u8BBF\u5BA2\u6570:G.visited,\u8BBF\u95EE\u91CF:G.viewer})}}catch(oe){b.e(oe)}finally{b.f()}return $},[r]),je={data:we,xField:"date",height:200},Ee={data:De,xField:"date",height:200};return(0,e.jsx)(Y.Z,{onResize:function(Z){Se(Z.width<596)},children:(0,e.jsxs)(N.Z,{spinning:U,children:[(0,e.jsxs)(h.Z,{split:d?"horizontal":"vertical",bordered:!0,style:{marginBottom:d?8:0},children:[(0,e.jsx)(i.Z,{colSpan:d?24:6,statistic:{title:"\u6587\u7AE0\u6570",value:(r==null||(n=r.total)===null||n===void 0?void 0:n.articleNum)||0,layout:d?"horizontal":"vertical"}}),(0,e.jsx)(i.Z,{colSpan:d?24:6,statistic:{title:"\u603B\u5B57\u6570",layout:d?"horizontal":"vertical",value:(r==null||(l=r.total)===null||l===void 0?void 0:l.wordCount)||0}}),(0,e.jsx)(i.Z,{colSpan:d?24:6,statistic:{title:(0,e.jsx)(J.Z,{title:"\u603B\u8BBF\u5BA2\u6570",tip:"\u4EE5\u6D4F\u89C8\u5668\u5185\u7F13\u5B58\u7684\u552F\u4E00\u6807\u8BC6\u7B26\u4E3A\u8861\u91CF\u6807\u51C6\u8BA1\u7B97\u5168\u7AD9\u72EC\u7ACB\u8BBF\u5BA2\u7684\u6570\u91CF"}),value:(r==null||(t=r.viewer)===null||t===void 0||(o=t.now)===null||o===void 0?void 0:o.visited)||0,layout:d?"horizontal":"vertical",description:(0,e.jsx)(ve,{title:"\u4ECA\u65E5\u65B0\u589E",value:(r==null||(f=r.viewer)===null||f===void 0||(x=f.add)===null||x===void 0?void 0:x.visited)||0,trend:"up"})}}),(0,e.jsx)(i.Z,{colSpan:d?24:6,statistic:{title:(0,e.jsx)(J.Z,{title:"\u603B\u8BBF\u95EE\u6570",tip:"\u4EE5\u6BCF\u4E00\u6B21\u9875\u9762\u7684\u8BBF\u95EE\u53CA\u8DF3\u8F6C\u4E3A\u8861\u91CF\u6807\u51C6\u8BA1\u7B97\u5168\u7AD9\u7684\u8BBF\u95EE\u6570\u91CF"}),layout:d?"horizontal":"vertical",value:(r==null||(F=r.viewer)===null||F===void 0||(y=F.now)===null||y===void 0?void 0:y.viewer)||0,description:(0,e.jsx)(ve,{title:"\u4ECA\u65E5\u65B0\u589E",value:(r==null||(V=r.viewer)===null||V===void 0||(P=V.add)===null||P===void 0?void 0:P.viewer)||0,trend:"up"})}})]}),(0,e.jsxs)(h.Z,{bordered:!d,split:d?"horizontal":"vertical",ghost:!!d,children:[(0,e.jsx)(i.Z,{style:{marginBottom:d?8:0},colSpan:d?24:12,className:B()["card-full-title"],title:(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,e.jsx)("div",{children:"\u8BBF\u5BA2\u6570\u8D8B\u52BF\u56FE"}),(0,e.jsx)(E,{d:"\u5929",value:c,setValue:w})]}),chart:(0,e.jsx)(te.Z,(0,S.Z)({yField:"\u8BBF\u5BA2\u6570"},Ee))}),(0,e.jsx)(i.Z,{colSpan:d?24:12,className:B()["card-full-title"],title:(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,e.jsx)("div",{children:"\u8BBF\u95EE\u91CF\u8D8B\u52BF\u56FE"}),(0,e.jsx)(E,{d:"\u5929",value:c,setValue:w})]}),chart:(0,e.jsx)(te.Z,(0,S.Z)({yField:"\u8BBF\u95EE\u91CF"},Ee))})]}),(0,e.jsxs)(h.Z,{bordered:!d,split:d?"horizontal":"vertical",ghost:!!d,children:[(0,e.jsx)(i.Z,{style:{marginBottom:d?8:0},colSpan:d?24:12,className:B()["card-full-title"],title:(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,e.jsx)("div",{children:"\u603B\u8BBF\u5BA2\u6570\u8D8B\u52BF\u56FE"}),(0,e.jsx)(E,{d:"\u5929",value:c,setValue:w})]}),chart:(0,e.jsx)(te.Z,(0,S.Z)({yField:"\u8BBF\u5BA2\u6570"},je))}),(0,e.jsx)(i.Z,{colSpan:d?24:12,className:B()["card-full-title"],title:(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,e.jsx)("div",{children:"\u603B\u8BBF\u95EE\u91CF\u8D8B\u52BF\u56FE"}),(0,e.jsx)(E,{d:"\u5929",value:c,setValue:w})]}),chart:(0,e.jsx)(te.Z,(0,S.Z)({yField:"\u8BBF\u95EE\u91CF"},je))})]})]})},"resize-observer")},ye=Fe,pe=a(30381),ce=a.n(pe),Te=function(){return(Math.random()*1e6).toFixed(0)},me="YYYY-MM-DD HH:mm:ss",be=function(n){return n?moment(n).format(me):"-"},ze=function(){for(var n=arguments.length,l=new Array(n),t=0;t<n;t++)l[t]=arguments[t];for(var o=0,f=l;o<f.length;o++){var x=f[o];try{return moment(x).format(me)}catch(F){}}return"-"},he=function(n){if(!n||n=="")return"-";var l=ce()().diff(ce()(n),"seconds");if(l<=60)return l+"\u79D2\u524D";if(l<=60*60)return Math.floor(l/60)+"\u5206\u949F\u524D";if(l<=60*60*60)return Math.floor(l/60/60)+"\u5C0F\u65F6\u524D";if(l<=60*60*60*24)return Math.floor(l/60/60/24)+"\u5929\u524D"},fe=function(m){var n=m.articles,l=m.showViewerNum,t=m.showRecentViewTime;return(0,e.jsx)("div",{children:n.map(function(o){var f=o.id,x=o.title,F=o.viewer,y=F===void 0?0:F,V=o.lastVisitedTime;return(0,e.jsxs)("a",{className:"article-list-item uaa",href:"/post/".concat(f),target:"_blank",rel:"noreferrer",children:[(0,e.jsx)("div",{className:"",children:x}),l&&(0,e.jsx)("div",{children:"".concat(y||0,"\u4EBA\u6B21")}),t&&(0,e.jsx)("div",{children:he(V)})]},f)})})},Be=a(73727),Ze=function(){var n=(0,s.useState)(),l=(0,v.Z)(n,2),t=l[0],o=l[1],f=(0,s.useState)(!0),x=(0,v.Z)(f,2),F=x[0],y=x[1],V=(0,s.useState)(!1),P=(0,v.Z)(V,2),u=P[0],Q=P[1],r=(0,k.u)(5),R=(0,v.Z)(r,2),D=R[0],K=R[1],U=(0,s.useCallback)((0,O.Z)((0,g.Z)().mark(function p(){var c,w;return(0,g.Z)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,(0,I.xq)("viewer",5,D);case 2:c=j.sent,w=c.data,o(w);case 5:case"end":return j.stop()}},p)})),[o,D]);(0,s.useEffect)(function(){y(!0),U().then(function(){y(!1)})},[U,y]);var H=(0,s.useMemo)(function(){if(!!t&&!!(t!=null&&t.siteLastVisitedPathname))return t==null?void 0:t.siteLastVisitedPathname},[t]),q=(0,s.useMemo)(function(){return!t||!t.siteLastVisitedTime?"-":he(t==null?void 0:t.siteLastVisitedTime)},[t]);return(0,e.jsx)(Y.Z,{onResize:function(c){Q(c.width<596)},children:(0,e.jsxs)(N.Z,{spinning:F,children:[(0,e.jsxs)(h.Z,{split:u?"horizontal":"vertical",bordered:!0,style:{marginBottom:u?8:0},children:[(0,e.jsx)(i.Z,{colSpan:u?24:6,statistic:{layout:u?"horizontal":"vertical",title:(0,e.jsx)("a",{href:"https://tongji.baidu.com/main/homepage/",className:"ua blue",target:"_blank",rel:"noreferrer",children:"\u767E\u5EA6\u7EDF\u8BA1"}),formatter:function(){return t!=null&&t.enableBaidu?(0,e.jsx)("span",{children:"\u5DF2\u5F00\u542F"}):(0,e.jsx)(Be.rU,{to:"/admin/site/setting?siteInfoTab=more",children:"\u672A\u914D\u7F6E"})},status:t!=null&&t.enableBaidu?"success":"error"}}),(0,e.jsx)(i.Z,{colSpan:u?24:6,statistic:{layout:u?"horizontal":"vertical",title:(0,e.jsx)("a",{href:"https://analytics.google.com/analytics/web/",className:"ua blue",target:"_blank",rel:"noreferrer",children:"\u8C37\u6B4C\u5206\u6790"}),formatter:function(){return t!=null&&t.enableGA?(0,e.jsx)("span",{children:"\u5DF2\u5F00\u542F"}):(0,e.jsx)(Be.rU,{to:"/admin/site/setting?siteInfoTab=more",children:"\u672A\u914D\u7F6E"})},status:t!=null&&t.enableGA?"success":"error"}}),(0,e.jsx)(i.Z,{colSpan:u?24:6,statistic:{layout:u?"horizontal":"vertical",title:"\u6700\u8FD1\u8BBF\u95EE",value:q}}),(0,e.jsx)(i.Z,{colSpan:u?24:6,statistic:{layout:u?"horizontal":"vertical",title:"\u6700\u8FD1\u8BBF\u95EE\u8DEF\u5F84",formatter:function(c){return(0,e.jsx)("a",{className:"ua blue",target:"_blank",rel:"noreferrer",href:H,children:(t==null?void 0:t.siteLastVisitedPathname)||"-"})}}})]}),(0,e.jsxs)(h.Z,{split:u?"horizontal":"vertical",bordered:!0,style:{marginBottom:u?8:0},children:[(0,e.jsx)(i.Z,{colSpan:u?24:6,statistic:{layout:u?"horizontal":"vertical",title:(0,e.jsx)(J.Z,{title:"\u603B\u8BBF\u5BA2\u6570",tip:"\u4EE5\u6D4F\u89C8\u5668\u5185\u7F13\u5B58\u7684\u552F\u4E00\u6807\u8BC6\u7B26\u4E3A\u8861\u91CF\u6807\u51C6\u8BA1\u7B97\u5168\u7AD9\u72EC\u7ACB\u8BBF\u5BA2\u7684\u6570\u91CF"}),value:(t==null?void 0:t.totalVisited)||0}}),(0,e.jsx)(i.Z,{colSpan:u?24:6,statistic:{layout:u?"horizontal":"vertical",title:(0,e.jsx)(J.Z,{title:"\u603B\u8BBF\u95EE\u6570",tip:"\u4EE5\u6BCF\u4E00\u6B21\u9875\u9762\u7684\u8BBF\u95EE\u53CA\u8DF3\u8F6C\u4E3A\u8861\u91CF\u6807\u51C6\u8BA1\u7B97\u5168\u7AD9\u7684\u8BBF\u95EE\u6570\u91CF"}),value:(t==null?void 0:t.totalViewer)||0}}),(0,e.jsx)(i.Z,{colSpan:u?24:6,statistic:{layout:u?"horizontal":"vertical",title:(0,e.jsx)(J.Z,{title:"\u5355\u7BC7\u6700\u9AD8\u8BBF\u5BA2\u6570",tip:"\u4EE5\u6D4F\u89C8\u5668\u5185\u7F13\u5B58\u7684\u552F\u4E00\u6807\u8BC6\u7B26\u4E3A\u8861\u91CF\u6807\u51C6\u8BA1\u7B97\u51FA\u5355\u7BC7\u6587\u7AE0\u6700\u9AD8\u7684\u72EC\u7ACB\u8BBF\u5BA2\u6570"}),value:(t==null?void 0:t.maxArticleVisited)||0}}),(0,e.jsx)(i.Z,{colSpan:u?24:6,statistic:{layout:u?"horizontal":"vertical",title:(0,e.jsx)(J.Z,{title:"\u5355\u7BC7\u6700\u9AD8\u8BBF\u95EE\u91CF",tip:"\u4EE5\u6BCF\u4E00\u6B21\u9875\u9762\u7684\u8BBF\u95EE\u53CA\u8DF3\u8F6C\u4E3A\u8861\u91CF\u6807\u51C6\u8BA1\u7B97\u51FA\u5355\u7BC7\u6587\u7AE0\u6700\u9AD8\u7684\u8BBF\u95EE\u91CF"}),value:(t==null?void 0:t.maxArticleViewer)||0}})]}),(0,e.jsxs)(h.Z,{split:u?"horizontal":"vertical",bordered:!u,ghost:!!u,style:{marginBottom:u?8:0},children:[(0,e.jsx)(h.Z,{ghost:!0,colSpan:u?24:12,style:{marginBottom:u?8:0},children:(0,e.jsx)(i.Z,{title:(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,e.jsx)("div",{children:"\u6700\u8FD1\u8BBF\u95EETOP"}),(0,e.jsx)(E,{d:"\u6761",value:D,setValue:K})]}),className:B()["card-full-title"],chart:(0,e.jsx)("div",{style:{marginTop:-14},children:(0,e.jsx)(fe,{showRecentViewTime:!0,articles:(t==null?void 0:t.recentVisitArticles)||[]})})})}),(0,e.jsx)(h.Z,{ghost:!0,colSpan:u?24:12,children:(0,e.jsx)(i.Z,{title:(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,e.jsx)("div",{children:"\u6587\u7AE0\u8BBF\u95EE\u91CFTOP"}),(0,e.jsx)(E,{d:"\u6761",value:D,setValue:K})]}),className:B()["card-full-title"],chart:(0,e.jsx)("div",{style:{marginTop:-14},children:(0,e.jsx)(fe,{showViewerNum:!0,articles:(t==null?void 0:t.topViewer)||[]})})})})]})]})},"resize-observer")},ge=Ze,Ce=function(){var n=(0,A.x)("overview","tab"),l=(0,v.Z)(n,2),t=l[0],o=l[1],f={overview:(0,e.jsx)(ye,{}),viewer:(0,e.jsx)(ge,{}),article:(0,e.jsx)(se,{})};return(0,e.jsx)(L.ZP,{extra:null,header:{title:null,extra:null,ghost:!0},className:B().thinheader,onTabChange:function(F){o(F)},tabActiveKey:t,tabList:[{tab:"\u6570\u636E\u6982\u89C8",key:"overview"},{tab:"\u8BBF\u5BA2\u7EDF\u8BA1",key:"viewer"},{tab:"\u6587\u7AE0\u5206\u6790",key:"article"}],title:null,children:f[t]})},Ae=Ce},15721:function(X,M,a){"use strict";a.d(M,{u:function(){return L}});var v=a(2824),A=a(67294),L=function(B,W){var N="van-blog-admin-num-".concat(W),S=window.localStorage.getItem(N)||B,g=(0,A.useState)(parseInt(S)),O=(0,v.Z)(g,2),h=O[0],i=O[1];return[h,function(s){window.localStorage.setItem(N,s),i(s)}]}},50236:function(X,M,a){"use strict";a.d(M,{x:function(){return z}});var v=a(2824),A=a(81910),L=a(67294),z=function(W,N){var S=(0,L.useState)(A.m8.location.query[N]||W),g=(0,v.Z)(S,2),O=g[0],h=g[1];return[O,function(i){h(i);for(var s={},I=0,ae=Object.entries(A.m8.location.query);I<ae.length;I++){var ue=ae[I],e=(0,v.Z)(ue,2),ie=e[0],le=e[1];s[ie]=le}s[N]=i;for(var E="?",_=0,ee=Object.entries(s);_<ee.length;_++){var k=ee[_],Y=(0,v.Z)(k,2),re=Y[0],se=Y[1];E+="".concat(re,"=").concat(se,"&")}E=E.substring(0,E.length-1),A.m8.push("".concat(A.m8.location.pathname).concat(E))}]}}}]);
