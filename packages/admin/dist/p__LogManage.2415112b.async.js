(self.webpackChunk_vanblog_admin=self.webpackChunk_vanblog_admin||[]).push([[8413,9694],{82592:function(S){S.exports={"card-full-title":"card-full-title___rJTGA",thinheader:"thinheader___2DwVu"}},96131:function(S,Z,n){"use strict";n.r(Z),n.d(Z,{default:function(){return f}});var h=n(2824),m=n(50236),P=n(67265),D=n(82592),B=n.n(D),p=n(90636),y=n(3182),O=n(71153),c=n(60331),j=n(71704),T=n(88328),v=n(67294),e=n(85893),C=[{title:"\u5E8F\u53F7",align:"center",width:50,render:function(l,r,a){return a+1}},{title:"\u767B\u5F55\u65F6\u95F4",dataIndex:"time",key:"time",align:"center",render:function(l,r){return new Date(r.time).toLocaleString()}},{title:"\u767B\u5F55\u5730\u5740",dataIndex:"address",key:"address",align:"center"},{title:"\u767B\u5F55IP",dataIndex:"ip",key:"ip",align:"center"},{title:"\u767B\u5F55\u8BBE\u5907",dataIndex:"platform",key:"platform",align:"center"},{title:"\u767B\u5F55\u72B6\u6001",dataIndex:"success",key:"success",align:"center",render:function(l,r){return(0,e.jsx)(c.Z,{color:r.success?"success":"error",style:{marginRight:0},children:r.success?"\u6210\u529F":"\u5931\u8D25"})}}];function E(){var u=(0,v.useRef)();return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(T.Z,{cardBordered:!0,rowKey:"time",columns:C,search:!1,dateFormatter:"string",actionRef:u,options:!0,headerTitle:"\u767B\u5F55\u65E5\u5FD7",pagination:{pageSize:10,simple:!0,hideOnSinglePage:!0},request:function(){var l=(0,y.Z)((0,p.Z)().mark(function r(a){var d,g;return(0,p.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,j.Bd)("login",a.current,a.pageSize);case 2:return d=t.sent,g=d.data,t.abrupt("return",{data:g.data,success:!0,total:g.total});case 5:case"end":return t.stop()}},r)}));return function(r){return l.apply(this,arguments)}}()})})}var b=n(71194),I=n(50146),A=n(81910);function R(){var u=(0,v.useRef)(),l=(0,v.useState)([]),r=(0,h.Z)(l,2),a=r[0],d=r[1];(0,v.useEffect)(function(){(0,j.ot)().then(function(s){var t=s.data;d(t)})},[]);var g=[{title:"\u5E8F\u53F7",align:"center",width:50,render:function(t,i,o){return o+1}},{title:"\u6D41\u6C34\u7EBF id",dataIndex:"pipelineId",key:"pipelineId",align:"center"},{title:"\u540D\u79F0",dataIndex:"pipelineName",key:"pipelineName",align:"center",render:function(t,i){return(0,e.jsx)("a",{onClick:function(){A.m8.push("/code?type=pipeline&id="+i.pipelineId)},children:t})}},{title:"\u89E6\u53D1\u4E8B\u4EF6",dataIndex:"eventName",key:"eventName",align:"center",render:function(t){var i;return(0,e.jsx)(c.Z,{color:"blue",children:a==null||(i=a.find(function(o){return o.eventName==t}))===null||i===void 0?void 0:i.eventNameChinese})}},{title:"\u7ED3\u679C",dataIndex:"success",key:"success",align:"center",render:function(t){return t?(0,e.jsx)(c.Z,{color:"green",children:"\u6210\u529F"}):(0,e.jsx)(c.Z,{color:"red",children:"\u5931\u8D25"})}},{title:"\u8BE6\u60C5",dataIndex:"detail",key:"detail",render:function(t,i){return(0,e.jsx)("a",{onClick:function(){I.Z.info({title:"\u8BE6\u60C5",width:800,content:(0,e.jsxs)("div",{style:{maxHeight:"60vh",overflow:"auto"},children:[(0,e.jsx)("p",{children:"\u811A\u672C\u65E5\u5FD7\uFF1A"}),(0,e.jsx)("pre",{children:i.logs.map(function(F){return(0,e.jsx)("p",{children:F})})}),(0,e.jsx)("p",{children:"\u8F93\u5165\uFF1A"}),(0,e.jsx)("pre",{children:JSON.stringify(i.input,null,2)}),(0,e.jsx)("p",{children:"\u8F93\u51FA\uFF1A"}),(0,e.jsx)("pre",{children:JSON.stringify(i.output,null,2)})]})})},children:"\u8BE6\u60C5"})}}];return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(T.Z,{cardBordered:!0,rowKey:"time",columns:g,search:!1,dateFormatter:"string",actionRef:u,options:!0,headerTitle:"\u6D41\u6C34\u7EBF\u65E5\u5FD7",pagination:{pageSize:10,simple:!0,hideOnSinglePage:!0},request:function(){var s=(0,y.Z)((0,p.Z)().mark(function t(i){var o,F;return(0,p.Z)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,(0,j.Bd)("runPipeline",i.current,i.pageSize);case 2:return o=x.sent,F=o.data,x.abrupt("return",{data:F.data,success:!0,total:F.total});case 5:case"end":return x.stop()}},t)}));return function(t){return s.apply(this,arguments)}}()})})}function f(){var u={login:(0,e.jsx)(E,{}),pipeline:(0,e.jsx)(R,{})},l=(0,m.x)("pipeline","tab"),r=(0,h.Z)(l,2),a=r[0],d=r[1];return(0,e.jsx)(P.ZP,{title:null,extra:null,header:{title:null,extra:null,ghost:!0},className:B().thinheader,tabActiveKey:a,tabList:[{tab:"\u6D41\u6C34\u7EBF\u65E5\u5FD7",key:"pipeline"},{tab:"\u767B\u5F55\u65E5\u5FD7",key:"login"}],onTabChange:d,children:u[a]})}},50236:function(S,Z,n){"use strict";n.d(Z,{x:function(){return D}});var h=n(2824),m=n(81910),P=n(67294),D=function(p,y){var O=(0,P.useState)(m.m8.location.query[y]||p),c=(0,h.Z)(O,2),j=c[0],T=c[1];return[j,function(v){T(v);for(var e={},C=0,E=Object.entries(m.m8.location.query);C<E.length;C++){var b=E[C],I=(0,h.Z)(b,2),A=I[0],R=I[1];e[A]=R}e[y]=v;for(var f="?",u=0,l=Object.entries(e);u<l.length;u++){var r=l[u],a=(0,h.Z)(r,2),d=a[0],g=a[1];f+="".concat(d,"=").concat(g,"&")}f=f.substring(0,f.length-1),m.m8.push("".concat(m.m8.location.pathname).concat(f))}]}}}]);
