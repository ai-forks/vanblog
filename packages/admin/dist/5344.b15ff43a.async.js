var L=Object.assign;(self.webpackChunk_vanblog_admin=self.webpackChunk_vanblog_admin||[]).push([[5344],{45344:function($,P,a){"use strict";a.r(P),a.d(P,{diagram:function(){return z}});var D=a(40041),p=a(82106),R=a(67058),n=a(92561),B=a(56647),h=a(33125),G=a(27856),H=a(27484),F=a(67925),J=a(91089),Q=a(31898),V=a(61939);const S=o=>n.e.sanitizeText(o,(0,n.g)());let T={dividerMargin:10,padding:5,textHeight:10,curve:void 0};const I=function(o,s,u,i){const t=Object.keys(o);n.l.info("keys:",t),n.l.info(o),t.forEach(function(r){var b,g;var l,d;const e=o[r];let y="";e.cssClasses.length>0&&(y=y+" "+e.cssClasses.join(" "));const c={labelStyle:"",style:""},E=(b=e.label)!=null?b:e.id,_=0,v="class_box",f={labelStyle:c.labelStyle,shape:v,labelText:S(E),classData:e,rx:_,ry:_,class:y,style:c.style,id:e.id,domId:e.domId,tooltip:i.db.getTooltip(e.id)||"",haveCallback:e.haveCallback,link:e.link,width:e.type==="group"?500:void 0,type:e.type,padding:(g=(l=(0,n.g)().flowchart)==null?void 0:l.padding)!=null?g:(d=(0,n.g)().class)==null?void 0:d.padding};s.setNode(e.id,f),n.l.info("setNode",f)})},W=function(o,s,u,i){n.l.info(o),o.forEach(function(t,r){var m;var l,d;const e=t,y="",c={labelStyle:"",style:""},E=e.text,_=0,v="note",f={labelStyle:c.labelStyle,shape:v,labelText:S(E),noteData:e,rx:_,ry:_,class:y,style:c.style,id:e.id,domId:e.id,tooltip:"",type:"note",padding:(m=(l=(0,n.g)().flowchart)==null?void 0:l.padding)!=null?m:(d=(0,n.g)().class)==null?void 0:d.padding};if(s.setNode(e.id,f),n.l.info("setNode",f),!e.class||!(e.class in i))return;const b=u+r,g={id:`edgeNote${b}`,classes:"relation",pattern:"dotted",arrowhead:"none",startLabelRight:"",endLabelLeft:"",arrowTypeStart:"none",arrowTypeEnd:"none",style:"fill:none",labelStyle:"",curve:(0,h.o)(T.curve,p.c_6)};s.setEdge(e.id,e.class,g,b)})},K=function(o,s){const u=(0,n.g)().flowchart;let i=0;o.forEach(function(t){var d;var r;i++;const l={classes:"relation",pattern:t.relation.lineType==1?"dashed":"solid",id:"id"+i,arrowhead:t.type==="arrow_open"?"none":"normal",startLabelRight:t.relationTitle1==="none"?"":t.relationTitle1,endLabelLeft:t.relationTitle2==="none"?"":t.relationTitle2,arrowTypeStart:C(t.relation.type1),arrowTypeEnd:C(t.relation.type2),style:"fill:none",labelStyle:"",curve:(0,h.o)(u==null?void 0:u.curve,p.c_6)};if(n.l.info(l,t),t.style!==void 0){const e=(0,h.n)(t.style);l.style=e.style,l.labelStyle=e.labelStyle}t.text=t.title,t.text===void 0?t.style!==void 0&&(l.arrowheadStyle="fill: #333"):(l.arrowheadStyle="fill: #333",l.labelpos="c",((d=(r=(0,n.g)().flowchart)==null?void 0:r.htmlLabels)!=null?d:(0,n.g)().htmlLabels)?(l.labelType="html",l.label='<span class="edgeLabel">'+t.text+"</span>"):(l.labelType="text",l.label=t.text.replace(n.e.lineBreakRegex,`
`),t.style===void 0&&(l.style=l.style||"stroke: #333; stroke-width: 1.5px;fill:none"),l.labelStyle=l.labelStyle.replace("color:","fill:"))),s.setEdge(t.id1,t.id2,l,i)})},U=function(o){T=L(L({},T),o)},N=function(o,s,u,i){var g,m,w,A;n.l.info("Drawing class - ",s);const t=(g=(0,n.g)().flowchart)!=null?g:(0,n.g)().class,r=(0,n.g)().securityLevel;n.l.info("config:",t);const l=(m=t==null?void 0:t.nodeSpacing)!=null?m:50,d=(w=t==null?void 0:t.rankSpacing)!=null?w:50,e=new R.k({multigraph:!0,compound:!0}).setGraph({rankdir:i.db.getDirection(),nodesep:l,ranksep:d,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}}),y=i.db.getClasses(),c=i.db.getRelations(),E=i.db.getNotes();n.l.info(c),I(y,e,s,i),K(c,e),W(E,e,c.length+1,y);let _;r==="sandbox"&&(_=(0,p.Ys)("#i"+s));const v=r==="sandbox"?(0,p.Ys)(_.nodes()[0].contentDocument.body):(0,p.Ys)("body"),f=v.select(`[id="${s}"]`),b=v.select("#"+s+" g");if((0,B.r)(b,e,["aggregation","extension","composition","dependency","lollipop"],"classDiagram",s),h.u.insertTitle(f,"classTitleText",(A=t==null?void 0:t.titleTopMargin)!=null?A:5,i.db.getDiagramTitle()),(0,h.s)(e,f,t==null?void 0:t.diagramPadding,t==null?void 0:t.useMaxWidth),!(t==null?void 0:t.htmlLabels)){const O=r==="sandbox"?_.nodes()[0].contentDocument:document,Y=O.querySelectorAll('[id="'+s+'"] .edgeLabel .label');for(const M of Y){const k=M.getBBox(),x=O.createElementNS("http://www.w3.org/2000/svg","rect");x.setAttribute("rx",0),x.setAttribute("ry",0),x.setAttribute("width",k.width),x.setAttribute("height",k.height),M.insertBefore(x,M.firstChild)}}};function C(o){let s;switch(o){case 0:s="aggregation";break;case 1:s="extension";break;case 2:s="composition";break;case 3:s="dependency";break;case 4:s="lollipop";break;default:s="none"}return s}const j={setConf:U,draw:N},z={parser:D.p,db:D.d,renderer:j,styles:D.s,init:o=>{o.class||(o.class={}),o.class.arrowMarkerAbsolute=o.arrowMarkerAbsolute,D.d.clear()}}}}]);
