(self.webpackChunk_vanblog_admin=self.webpackChunk_vanblog_admin||[]).push([[4522],{64317:function(K,C,e){"use strict";var l=e(28991),c=e(81253),D=e(85893),u=e(22270),i=e(67294),E=e(66758),m=e(57565),_=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],M=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],v=i.forwardRef(function(n,L){var g=n.fieldProps,A=n.children,T=n.params,h=n.proFieldProps,O=n.mode,B=n.valueEnum,s=n.request,R=n.showSearch,I=n.options,j=(0,c.Z)(n,_),x=(0,i.useContext)(E.Z);return(0,D.jsx)(m.Z,(0,l.Z)((0,l.Z)({valueEnum:(0,u.h)(B),request:s,params:T,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,l.Z)({options:I,mode:O,showSearch:R,getPopupContainer:x.getPopupContainer},g),ref:L,proFieldProps:h},j),{},{children:A}))}),Z=i.forwardRef(function(n,L){var g=n.fieldProps,A=n.children,T=n.params,h=n.proFieldProps,O=n.mode,B=n.valueEnum,s=n.request,R=n.options,I=(0,c.Z)(n,M),j=(0,l.Z)({options:R,mode:O||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},g),x=(0,i.useContext)(E.Z);return(0,D.jsx)(m.Z,(0,l.Z)((0,l.Z)({valueEnum:(0,u.h)(B),request:s,params:T,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,l.Z)({getPopupContainer:x.getPopupContainer},j),ref:L,proFieldProps:h},I),{},{children:A}))}),d=v,P=Z,p=d;p.SearchSelect=P,p.displayName="ProFormComponent",C.Z=p},52688:function(K,C,e){"use strict";var l=e(28991),c=e(81253),D=e(85893),u=e(67294),i=e(57565),E=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],m=u.forwardRef(function(_,M){var v=_.fieldProps,Z=_.unCheckedChildren,d=_.checkedChildren,P=_.proFieldProps,p=(0,c.Z)(_,E);return(0,D.jsx)(i.Z,(0,l.Z)({valueType:"switch",fieldProps:(0,l.Z)({unCheckedChildren:Z,checkedChildren:d},v),ref:M,valuePropName:"checked",proFieldProps:P,filedConfig:{valuePropName:"checked",ignoreWidth:!0}},p))});C.Z=m},5966:function(K,C,e){"use strict";var l=e(28991),c=e(81253),D=e(85893),u=e(57565),i=["fieldProps","proFieldProps"],E=["fieldProps","proFieldProps"],m="text",_=function(d){var P=d.fieldProps,p=d.proFieldProps,n=(0,c.Z)(d,i);return(0,D.jsx)(u.Z,(0,l.Z)({valueType:m,fieldProps:P,filedConfig:{valueType:m},proFieldProps:p},n))},M=function(d){var P=d.fieldProps,p=d.proFieldProps,n=(0,c.Z)(d,E);return(0,D.jsx)(u.Z,(0,l.Z)({valueType:"password",fieldProps:P,proFieldProps:p,filedConfig:{valueType:m}},n))},v=_;v.Password=M,v.displayName="ProFormComponent",C.Z=v},86601:function(K,C,e){"use strict";e.d(C,{Z:function(){return i}});var l=e(22385),c=e(45777),D=e(1870),u=e(85893);function i(E){return(0,u.jsxs)("span",{children:[(0,u.jsx)("span",{style:{marginRight:4},children:E.title}),(0,u.jsx)(c.Z,{title:E.tip,placement:"bottom",children:(0,u.jsx)(D.Z,{style:{fontSize:16,fontWeight:400}})})]})}},2507:function(K,C,e){"use strict";e.d(C,{Z:function(){return L}});var l=e(9715),c=e(55843),D=e(11849),u=e(90636),i=e(34792),E=e(48086),m=e(3182),_=e(2824),M=e(37476),v=e(5966),Z=e(64317),d=e(52688),P=e(71704),p=e(67294),n=e(85893);function L(g){var A=g.mode,T=g.trigger,h=g.initialValues,O=g.onFinish,B=A==="edit",s=(0,p.useState)("\u9009\u62E9\u89E6\u53D1\u4E8B\u4EF6\u540E\u8BB2\u5C55\u793A\u8BE6\u60C5"),R=(0,_.Z)(s,2),I=R[0],j=R[1],x=(0,p.useState)([]),U=(0,_.Z)(x,2),W=U[0],b=U[1],F=function(o){for(var r=Object.keys(o),f=["name","description","eventName","enabled"],t=0;t<f.length;t++)if(!r.includes(f[t]))return!1;return!0};return(0,p.useEffect)(function(){var a;if(!(!h||!h.eventName)){var o=(a=W.find(function(r){return r.eventName===h.eventName}))===null||a===void 0?void 0:a.eventDescription;j(o||"\u9009\u62E9\u89E6\u53D1\u4E8B\u4EF6\u540E\u8BB2\u5C55\u793A\u8BE6\u60C5")}},[h,W]),(0,n.jsxs)(M.Y,{trigger:T,onFinish:function(){var a=(0,m.Z)((0,u.Z)().mark(function o(r){return(0,u.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(r),F(r)){t.next=6;break}return E.ZP.error("\u8BF7\u586B\u5199\u5B8C\u6574\u4FE1\u606F\u540E\u63D0\u4EA4\uFF01"),t.abrupt("return",!1);case 6:if(A!="create"){t.next=14;break}return t.next=9,(0,P.Jy)(r);case 9:return E.ZP.success("\u63D0\u4EA4\u6210\u529F\uFF01"),O(r),t.abrupt("return",!0);case 14:return t.next=16,(0,P.lz)(h.id,r);case 16:return E.ZP.success("\u63D0\u4EA4\u6210\u529F\uFF01"),O(r),t.abrupt("return",!0);case 19:case"end":return t.stop()}},o)}));return function(o){return a.apply(this,arguments)}}(),layout:"horizontal",labelCol:{span:4},initialValues:B?(0,D.Z)({},h):{enabled:!1},autoFocusFirstInput:!0,title:B?"\u4FEE\u6539\u6D41\u6C34\u7EBF":"\u521B\u5EFA\u6D41\u6C34\u7EBF",children:[(0,n.jsx)(v.Z,{name:"name",label:"\u540D\u79F0",required:!0}),(0,n.jsx)(v.Z,{name:"description",label:"\u63CF\u8FF0",required:!0,tooltip:"\u7ED9\u81EA\u5DF1\u5199\u7684\uFF0C\u9632\u6B62\u5FD8\u4E86"}),(0,n.jsx)(Z.Z,{name:"eventName",label:"\u89E6\u53D1\u4E8B\u4EF6",tooltip:"\u9009\u62E9\u540E\u53EF\u4EE5\u770B\u5230\u4E8B\u4EF6\u7684\u8BF4\u660E",required:!0,request:(0,m.Z)((0,u.Z)().mark(function a(){var o,r;return(0,u.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,P.ot)();case 2:return o=t.sent,r=o.data,b(r),t.abrupt("return",r==null?void 0:r.map(function(y){return{label:y.eventNameChinese,value:y.eventName}}));case 6:case"end":return t.stop()}},a)})),fieldProps:{onChange:function(o){var r,f=(r=W.find(function(t){return t.eventName===o}))===null||r===void 0?void 0:r.eventDescription;j(f||"\u9009\u62E9\u89E6\u53D1\u4E8B\u4EF6\u540E\u8BB2\u5C55\u793A\u8BE6\u60C5")}}}),(0,n.jsx)(c.Z.Item,{label:"\u4E8B\u4EF6\u8BF4\u660E",children:(0,n.jsx)("div",{children:I})}),(0,n.jsx)(d.Z,{name:"enabled",label:"\u72B6\u6001",required:!0}),(0,n.jsx)(Z.Z,{name:"deps",label:"\u4F9D\u8D56",tooltip:"\u4F9D\u8D56\u662F nodejs \u5305\u540D\uFF0C\u53EF\u4EE5\u8F93\u5165\u591A\u4E2A\uFF0C\u5C06\u901A\u8FC7 pnpm install <\u4F9D\u8D56\u540D> \u6765\u4F9D\u6B21\u5B89\u88C5",mode:"tags",placeholder:"\u8BF7\u8F93\u5165\u4F9D\u8D56"})]})}},92285:function(K,C,e){"use strict";e.r(C),e.d(C,{default:function(){return R}});var l=e(57663),c=e(71577),D=e(49111),u=e(19650),i=e(90636),E=e(34792),m=e(48086),_=e(71194),M=e(50146),v=e(3182),Z=e(71153),d=e(60331),P=e(2824),p=e(86601),n=e(67265),L=e(31490),g=e(88328),A=g.Z,T=e(71704),h=e(2507),O=e(67294),B=e(81910),s=e(85893);function R(){var I=(0,O.useState)([]),j=(0,P.Z)(I,2),x=j[0],U=j[1],W=(0,O.useRef)();(0,O.useEffect)(function(){(0,T.ot)().then(function(F){var a=F.data;U(a)})},[]);var b=[{dataIndex:"id",valueType:"number",title:"ID",width:48},{dataIndex:"name",valueType:"text",title:"\u540D\u79F0",width:120},{title:"\u662F\u5426\u5F02\u6B65",width:60,render:function(a,o){var r,f=(r=x.find(function(t){return t.eventName===o.eventName}))===null||r===void 0?void 0:r.passive;return(0,s.jsx)(d.Z,{children:f?"\u5F02\u6B65":"\u963B\u585E",color:f?"green":"red"})}},{dataIndex:"eventName",valueType:"text",title:"\u89E6\u53D1\u4E8B\u4EF6",width:120,render:function(a){var o;return(o=x.find(function(r){return r.eventName===a}))===null||o===void 0?void 0:o.eventNameChinese}},{dataIndex:"enabled",title:"\u72B6\u6001",width:60,render:function(a){return(0,s.jsx)(d.Z,{children:a?"\u542F\u7528":"\u7981\u7528",color:a?"green":"gray"})}},{title:"\u64CD\u4F5C",width:180,render:function(a,o,r){return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(u.Z,{children:[(0,s.jsx)("a",{onClick:function(){B.m8.push("/code?type=pipeline&id="+o.id)},children:"\u7F16\u8F91\u811A\u672C"}),(0,s.jsx)(h.Z,{mode:"edit",trigger:(0,s.jsx)("a",{children:"\u4FEE\u6539\u4FE1\u606F"}),initialValues:o,onFinish:function(){var t;(t=W.current)===null||t===void 0||t.reload()}}),(0,s.jsx)("a",{onClick:(0,v.Z)((0,i.Z)().mark(function f(){return(0,i.Z)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:M.Z.confirm({title:"\u786E\u5B9A\u5220\u9664\u8BE5\u6D41\u6C34\u7EBF\u5417\uFF1F ",onOk:function(){var N=(0,v.Z)((0,i.Z)().mark(function V(){return(0,i.Z)().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,(0,T.wN)(o.id);case 2:console.log(r),W.current.reload(),m.ZP.success("\u5220\u9664\u6210\u529F\uFF01");case 5:case"end":return S.stop()}},V)}));function $(){return N.apply(this,arguments)}return $}()});case 1:case"end":return y.stop()}},f)})),children:"\u5220\u9664"})]})})}}];return(0,s.jsx)(n.ZP,{header:{title:(0,s.jsx)(p.Z,{title:"\u6D41\u6C34\u7EBF",tip:"\u6D41\u6C34\u7EBF\u5141\u8BB8\u7528\u6237\u5728\u7279\u5B9A\u4E8B\u4EF6\u65F6\uFF0C\u81EA\u52A8\u89E6\u53D1\u6267\u884C\u81EA\u5B9A\u4E49\u4EE3\u7801\u3002"})},extra:(0,s.jsx)(c.Z,{onClick:function(){window.open("https://vanblog.mereith.com/features/pipeline.html","_blank")},children:"\u5E2E\u52A9\u6587\u6863"}),children:(0,s.jsx)(A,{actionRef:W,pagination:{hideOnSinglePage:!0},toolBarRender:function(a){return[(0,s.jsx)(h.Z,{mode:"create",trigger:(0,s.jsx)(c.Z,{type:"primary",children:"\u65B0\u5EFA"}),onFinish:function(){a.reload()}},"createPipelineBtn1"),(0,s.jsx)(c.Z,{onClick:function(){B.m8.push("/site/log?tab=pipeline")},children:"\u8FD0\u884C\u65E5\u5FD7"},"viewLog")]},headerTitle:"\u6D41\u6C34\u7EBF\u5217\u8868",columns:b,search:!1,rowKey:"id",request:(0,v.Z)((0,i.Z)().mark(function F(){var a;return(0,i.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,T.Id)();case 2:return a=r.sent,r.abrupt("return",{data:a.data,success:!0,total:a.data.length});case 4:case"end":return r.stop()}},F)}))})})}}}]);
