(self.webpackChunk_vanblog_admin=self.webpackChunk_vanblog_admin||[]).push([[1993],{64317:function(ee,Z,n){"use strict";var P=n(28991),C=n(81253),R=n(85893),g=n(22270),h=n(67294),T=n(66758),s=n(57565),K=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],W=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],t=h.forwardRef(function(l,U){var B=l.fieldProps,S=l.children,j=l.params,V=l.proFieldProps,w=l.mode,F=l.valueEnum,f=l.request,$=l.showSearch,N=l.options,H=(0,C.Z)(l,K),L=(0,h.useContext)(T.Z);return(0,R.jsx)(s.Z,(0,P.Z)((0,P.Z)({valueEnum:(0,g.h)(F),request:f,params:j,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,P.Z)({options:N,mode:w,showSearch:$,getPopupContainer:L.getPopupContainer},B),ref:U,proFieldProps:V},H),{},{children:S}))}),u=h.forwardRef(function(l,U){var B=l.fieldProps,S=l.children,j=l.params,V=l.proFieldProps,w=l.mode,F=l.valueEnum,f=l.request,$=l.options,N=(0,C.Z)(l,W),H=(0,P.Z)({options:$,mode:w||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},B),L=(0,h.useContext)(T.Z);return(0,R.jsx)(s.Z,(0,P.Z)((0,P.Z)({valueEnum:(0,g.h)(F),request:f,params:j,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,P.Z)({getPopupContainer:L.getPopupContainer},H),ref:U,proFieldProps:V},N),{},{children:S}))}),E=t,y=u,D=E;D.SearchSelect=y,D.displayName="ProFormComponent",Z.Z=D},5966:function(ee,Z,n){"use strict";var P=n(28991),C=n(81253),R=n(85893),g=n(57565),h=["fieldProps","proFieldProps"],T=["fieldProps","proFieldProps"],s="text",K=function(E){var y=E.fieldProps,D=E.proFieldProps,l=(0,C.Z)(E,h);return(0,R.jsx)(g.Z,(0,P.Z)({valueType:s,fieldProps:y,filedConfig:{valueType:s},proFieldProps:D},l))},W=function(E){var y=E.fieldProps,D=E.proFieldProps,l=(0,C.Z)(E,T);return(0,R.jsx)(g.Z,(0,P.Z)({valueType:"password",fieldProps:y,proFieldProps:D,filedConfig:{valueType:s}},l))},t=K;t.Password=W,t.displayName="ProFormComponent",Z.Z=t},50727:function(ee,Z,n){"use strict";var P=n(9715),C=n(55843),R=n(57663),g=n(71577),h=n(96156),T=n(28481),s=n(81253),K=n(55507),W=n(92137),t=n(28991),u=n(85893),E=n(49101),y=n(97462),D=n(952),l=n(31490),U=n(26369),B=n(22270),S=n(48171),j=n(60249),V=n(21770),w=n(88306),F=n(8880),f=n(67294),$=n(88328),N=["onTableChange","maxLength","formItemProps","recordCreatorProps","rowKey","controlled","defaultValue","onChange","editableFormRef"],H=["record","position","creatorButtonText","newRecordType","parentKey","style"],L=f.createContext(void 0);function ue(e){var M=e.children,G=e.record,ne=e.position,re=e.newRecordType,J=e.parentKey,Q=(0,f.useContext)(L);return f.cloneElement(M,(0,t.Z)((0,t.Z)({},M.props),{},{onClick:function(){var Y=(0,W.Z)((0,K.Z)().mark(function te(oe){var X,k,p,A;return(0,K.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(X=(k=M.props).onClick)===null||X===void 0?void 0:X.call(k,oe);case 2:if(A=m.sent,A!==!1){m.next=5;break}return m.abrupt("return");case 5:Q==null||(p=Q.current)===null||p===void 0||p.addEditRecord(G,{position:ne,newRecordType:re,parentKey:J});case 6:case"end":return m.stop()}},te)}));function b(te){return Y.apply(this,arguments)}return b}()}))}function se(e){var M,G,ne=(0,l.YB)(),re=e.onTableChange,J=e.maxLength,Q=e.formItemProps,Y=e.recordCreatorProps,b=e.rowKey,te=e.controlled,oe=e.defaultValue,X=e.onChange,k=e.editableFormRef,p=(0,s.Z)(e,N),A=(0,U.Z)(e.value),q=(0,f.useRef)(),m=(0,f.useRef)();(0,f.useImperativeHandle)(p.actionRef,function(){return q.current});var fe=(0,V.Z)(function(){return e.value||oe||[]},{value:e.value,onChange:e.onChange}),_e=(0,T.Z)(fe,2),d=_e[0],Pe=_e[1],I=f.useMemo(function(){return typeof b=="function"?b:function(_,r){return _[b]||r}},[b]),ce=function(r){if(typeof r=="number"&&!e.name){if(r>=d.length)return r;var o=d&&d[r];return I==null?void 0:I(o,r)}if((typeof r=="string"||r>=d.length)&&e.name){var a=d.findIndex(function(i,v){var c;return(I==null||(c=I(i,v))===null||c===void 0?void 0:c.toString())===(r==null?void 0:r.toString())});return a}return r};(0,f.useImperativeHandle)(k,function(){var _=function(a){var i,v;if(a==null)throw new Error("rowIndex is required");var c=ce(a),O=[e.name,(i=c==null?void 0:c.toString())!==null&&i!==void 0?i:""].flat(1).filter(Boolean);return(v=m.current)===null||v===void 0?void 0:v.getFieldValue(O)},r=function(){var a,i=[e.name].flat(1).filter(Boolean);if(Array.isArray(i)&&i.length===0){var v,c=(v=m.current)===null||v===void 0?void 0:v.getFieldsValue();return Array.isArray(c)?c:Object.keys(c).map(function(O){return c[O]})}return(a=m.current)===null||a===void 0?void 0:a.getFieldValue(i)};return(0,t.Z)((0,t.Z)({},m.current),{},{getRowData:_,getRowsData:r,setRowData:function(a,i){var v,c,O,ie;if(a==null)throw new Error("rowIndex is required");var de=ce(a),Te=[e.name,(v=de==null?void 0:de.toString())!==null&&v!==void 0?v:""].flat(1).filter(Boolean),Ze=((c=m.current)===null||c===void 0||(O=c.getFieldsValue)===null||O===void 0?void 0:O.call(c))||{},ye=(0,F.Z)(Ze,Te,(0,t.Z)((0,t.Z)({},_(a)),i||{}));return(ie=m.current)===null||ie===void 0?void 0:ie.setFieldsValue(ye)}})}),(0,f.useEffect)(function(){!e.controlled||d.forEach(function(_,r){var o;(o=m.current)===null||o===void 0||o.setFieldsValue((0,h.Z)({},I(_,r),_))},{})},[d,e.controlled]),(0,f.useEffect)(function(){if(e.name){var _;m.current=e==null||(_=e.editable)===null||_===void 0?void 0:_.form}},[(M=e.editable)===null||M===void 0?void 0:M.form,e.name]);var x=Y||{},Ee=x.record,ae=x.position,he=x.creatorButtonText,Ce=x.newRecordType,ge=x.parentKey,De=x.style,Me=(0,s.Z)(x,H),me=ae==="top",z=(0,f.useMemo)(function(){return J&&J<=(d==null?void 0:d.length)?!1:Y!==!1&&(0,u.jsx)(ue,{record:(0,B.h)(Ee,d==null?void 0:d.length,d)||{},position:ae,parentKey:(0,B.h)(ge,d==null?void 0:d.length,d),newRecordType:Ce,children:(0,u.jsx)(g.Z,(0,t.Z)((0,t.Z)({type:"dashed",style:(0,t.Z)({display:"block",margin:"10px 0",width:"100%"},De),icon:(0,u.jsx)(E.Z,{})},Me),{},{children:he||ne.getMessage("editableTable.action.add","\u6DFB\u52A0\u4E00\u884C\u6570\u636E")}))})},[Y,J,d==null?void 0:d.length]),Oe=(0,f.useMemo)(function(){return z?me?{components:{header:{wrapper:function(r){var o,a=r.className,i=r.children;return(0,u.jsxs)("thead",{className:a,children:[i,(0,u.jsxs)("tr",{style:{position:"relative"},children:[(0,u.jsx)("td",{colSpan:0,style:{visibility:"hidden"},children:z}),(0,u.jsx)("td",{style:{position:"absolute",left:0,width:"100%"},colSpan:(o=p.columns)===null||o===void 0?void 0:o.length,children:z})]})]})}}}}:{tableViewRender:function(r,o){var a,i;return(0,u.jsxs)(u.Fragment,{children:[(a=(i=e.tableViewRender)===null||i===void 0?void 0:i.call(e,r,o))!==null&&a!==void 0?a:o,z]})}}:{}},[me,z]),le=(0,t.Z)({},e.editable),Re=(0,S.J)(function(_,r){var o,a,i;if((o=e.editable)===null||o===void 0||(a=o.onValuesChange)===null||a===void 0||a.call(o,_,r),(i=e.onValuesChange)===null||i===void 0||i.call(e,r,_),e.controlled){var v;e==null||(v=e.onChange)===null||v===void 0||v.call(e,r)}});return((e==null?void 0:e.onValuesChange)||((G=e.editable)===null||G===void 0?void 0:G.onValuesChange)||e.controlled&&(e==null?void 0:e.onChange))&&(le.onValuesChange=Re),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(L.Provider,{value:q,children:(0,u.jsx)($.Z,(0,t.Z)((0,t.Z)((0,t.Z)({search:!1,options:!1,pagination:!1,rowKey:b,revalidateOnFocus:!1},p),Oe),{},{tableLayout:"fixed",actionRef:q,onChange:re,editable:(0,t.Z)((0,t.Z)({},le),{},{formProps:(0,t.Z)({formRef:m},le.formProps)}),dataSource:d,onDataSourceChange:function(r){if(Pe(r),e.name&&ae==="top"){var o,a=(0,F.Z)({},[e.name].flat(1).filter(Boolean),r);(o=m.current)===null||o===void 0||o.setFieldsValue(a)}}}))}),e.name?(0,u.jsx)(y.Z,{name:[e.name],children:function(r){var o,a,i=(0,w.Z)(r,[e.name].flat(1)),v=i==null?void 0:i.find(function(c,O){return!(0,j.Z)(c,A==null?void 0:A[O])});return v&&A&&(e==null||(o=e.editable)===null||o===void 0||(a=o.onValuesChange)===null||a===void 0||a.call(o,v,i)),null}}):null]})}function ve(e){var M=D.ZP.useFormInstance();return e.name?(0,u.jsx)(C.Z.Item,(0,t.Z)((0,t.Z)({style:{maxWidth:"100%"}},e==null?void 0:e.formItemProps),{},{name:e.name,children:(0,u.jsx)(se,(0,t.Z)((0,t.Z)({},e),{},{editable:(0,t.Z)((0,t.Z)({},e.editable),{},{form:M})}))})):(0,u.jsx)(se,(0,t.Z)({},e))}ve.RecordCreator=ue,Z.Z=ve},86582:function(ee,Z,n){"use strict";n.d(Z,{Z:function(){return T}});var P=n(72560);function C(s){if(Array.isArray(s))return(0,P.Z)(s)}function R(s){if(typeof Symbol!="undefined"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}var g=n(64254);function h(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function T(s){return C(s)||R(s)||(0,g.Z)(s)||h()}}}]);
